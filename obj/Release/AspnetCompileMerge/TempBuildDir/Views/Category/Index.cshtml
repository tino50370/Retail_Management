@model  RetailKing.Models.HomeData

@{
    ViewBag.Title = "Index";
}

<div>
   
    <!-- Banner -->
    <section class="banner col-lg-12 col-md-12 col-sm-12">

        <div class="left-side-banner banner-item icon-on-right gray">
            <h4>263 (4) 570106</h4>
            <p>Monday - Saturday: 8am - 5pm PST</p>
            <i class="icons icon-phone-outline"></i>
        </div>

        <a href="#">
            <div class="middle-banner banner-item icon-on-left light-blue">
                <h4>Free shipping</h4>
                <p>on all orders over $99</p>
                <span class="button">Learn more</span>
                <i class="icons icon-truck-1"></i>
            </div>
        </a>

        <a href="#">
            <div class="right-side-banner banner-item orange">
                <h4>Crazy sale!</h4>
                <p>on selected items</p>
                <span class="button">Shop now</span>
            </div>
        </a>

    </section>
    <!-- /Banner -->
    <div class="col-lg-12 col-md-12 col-sm-12">
        <div class="breadcrumbs">
            <p><a href="#">Home</a> <i class="icons icon-right-dir"></i> @ViewData["Catecory"]</p>
        </div>
    </div>
 
  
    <!-- Main Content -->
    <section class="main-content col-lg-9 col-md-9 col-sm-9">

        <!-- Featured Products -->
        <div class="products-row row">

            <!-- Carousel Heading -->
            <div class="col-lg-12 col-md-12 col-sm-12">

                <div class="carousel-heading">
                    <h4>@ViewData["Catecory"]</h4>
                    <div class="carousel-arrows">
                        <i class="icons icon-left-dir"></i>
                        <i class="icons icon-right-dir"></i>
                    </div>
                </div>
                @{
                    var ct = (from e in Model.Categories.Where(u => u.AccountName.Trim() == ViewData["Catecory"].ToString()) select e).FirstOrDefault();
                    var subs = (from e in Model.Categories.Where(u => u.AccountCode.StartsWith(ct.AccountCode + "-")) select e).ToList();
                }
                @if (subs.Count() > 0) 
                { 
                <div class="col-lg-12 col-md-12 col-sm-12">

                    <div class="row subcategories">
                       @foreach (var sc in subs)
                       {
                            <!-- Subcategory -->
                        <div class="col-lg-fifth col-md-fifth col-sm-fifth subcategory">
                            @if (sc.Icon != null)
                            {
                               
                                <a href="@Url.Action("Index", "Category", new { Id= sc.AccountName})"><img src="@Url.Content(sc.Icon)" alt="@sc.AccountName"></a>
                            }
                           
                            <div class="product-info">
                                <h6><a href="@Url.Action("Index", "Category", new { Id= sc.AccountName})">@sc.AccountName</a></h6>
                            </div>

                        </div>
                        <!-- /Subcategory -->

                       }
                       

                    </div>

                </div>
                }
            </div>
            <!-- /Carousel Heading -->


                <div class="col-lg-6 col-md-6 col-sm-6">
                    <div class="category-results">
                        <p>Results 1-6 of 6</p>
                        <p>
                            Show
                            <select class="chosen-select">
                                <option>1</option>
                                <option>2</option>
                                <option>6</option>
                                <option>P10</option>
                            </select>
                            per page
                        </p>
                    </div>
                </div>

                <div class="col-lg-6 col-md-6 col-sm-6">
                    <div class="pagination">
                        <a href="#"><div class="previous"><i class="icons icon-left-dir"></i></div></a>
                        <a href="#"><div class="page-button">1</div></a>
                        <a href="#"><div class="page-button">2</div></a>
                        <a href="#"><div class="page-button">3</div></a>
                        <a href="#"><div class="next"><i class="icons icon-right-dir"></i></div></a>
                    </div>
                </div>

            

            <!-- Carousel -->
            <div class="carousel owl-carousel-wrap col-lg-12 col-md-12 col-sm-12">
                @{
                    var featured = (from e in Model.items select e).ToList();
                }
               
                 @foreach (var c in featured)
                    {
                	<!-- Product item -->
                     <div class="col-lg-4 col-md-4 col-sm-4 product">
       
            <!-- Product Item -->


            <div class="product-image">
                @if (c.ThumbImage == null)
                {
                <img src="@Url.Content("~/Content/Template/img/bag.png")" alt="@c.ItemName">
                }
                else
                {

                <img src="@Url.Content(c.ThumbImage)" alt="Product1">
                }
                <a href="@Url.Action("Details", "items", new { id = c.ID })" class="product-hover">
                    <i class="icons icon-eye-1"></i> Quick View
                </a>
            </div>


        
            <div class="product-info">
                <h5><a href="@Url.Action("Details", "items", new { id = c.ID })">@c.ItemName </a></h5>
                <span class="price">$@c.SellingPrice.Value.ToString("0.00", System.Globalization.CultureInfo.InvariantCulture)</span>
               
            </div>

            <div class="product-actions">
            
                @if (c.Balance > 0)
                {
                    <span class="add-to-cart">
                        <span class="action-wrapper">
                            <i class="icons icon-basket-2"></i>
                            <a href="@Url.Action("Details", "items", new { id = c.ID })">

                                <span class="action-name" style="color:#ffffff">View Details</span>

                            </a>
                        </span>
                    </span>
                }
                else
                {
                    <span class="add-to-favorites">
                        <span class="action-wrapper">
                            <i class="icons icon-basket-2"></i>
                            <a>
                                <span class="action-name" style="color:#ffffff">Out Of Stock</span>
                            </a>
                        </span>
                    </span>

                }
                <span class="add-to-compare">
                    <span class="action-wrapper">
                        <i class="icons icon-heart-empty"></i>
                        <span class="action-name">Add to wishlist</span>
                    </span>
                </span>
            
            </div>
       
        </div>
                    <!-- /Product Item -->  
                    }

             </div>
            <!-- /Carousel -->

        </div>
       
        <!-- Product Brands -->
        <div class="products-row row">

            <!-- Carousel Heading -->
            <div class="col-lg-12 col-md-12 col-sm-12">

                <div class="carousel-heading">
                    <h4>Product Brands</h4>
                    <div class="carousel-arrows">
                        <i class="icons icon-left-dir"></i>
                        <i class="icons icon-right-dir"></i>
                    </div>
                </div>

            </div>
            <!-- /Carousel Heading -->
            <!-- Carousel -->

            <div class="carousel owl-carousel-wrap col-lg-12 col-md-12 col-sm-12">

                <div class="owl-carousel" data-max-items="5">
                    @foreach (var partner in Model.Partners)
                    {
									<!-- Slide -->
                        <div>
                            <div class="product">
                                <a href="#"><img src="@Url.Content(partner.Logo)" alt="@partner.Name"></a>
                            </div>
                        </div>
									<!-- /Slide -->
                    }

                </div>

            </div>
            <!-- /Carousel -->

        </div>
        <!-- /Product Brands -->


    </section>
    <!-- /Main Content -->

    <!-- Sidebar -->
    <aside class="sidebar right-sidebar col-lg-3 col-md-3 col-sm-3">
        <!-- Filter -->
      

        <!-- Categories -->
        <div class="row sidebar-box purple">

            <div class="col-lg-12 col-md-12 col-sm-12">

                <div class="sidebar-box-heading">
                    <i class="icons icon-folder-open-empty"></i>
                    <h4>Categories</h4>
                </div>
                @{
                    var cats = (from e in Model.Categories.Where(u => u.AccountCode.Length == 4) select e).ToList();

                }
                <div class="sidebar-box-content">
                    <ul>
                        @foreach (var cat in cats)
                        {
                            var subcats = (from e in Model.Categories.Where(u => u.AccountCode.StartsWith(cat.AccountCode + "-")) select e).ToList();
                            <li>
                                <a href="@Url.Action("Index", "Category", new { id=cat.AccountName  })">@cat.AccountName <i class="icons icon-right-dir"></i></a>
                                @if (subcats.Count > 0)
                                {
                                    int runs = subcats.Count / 5;
                                    if (subcats.Count % 5 != 0)
                                    { runs = runs + 1; }
                                    <ul class="sidebar-dropdown">
                                        @for (int i = 0; i < runs; i++)
                                        {
                                            var top5 = (from e in subcats.Skip(i) select e).Take(5);
                                            <li>
                                                <ul>
                                                    @foreach (var scat in subcats)
                                                    {
                                                        <li>
                                                            <a href="@Url.Action("Index", "Category", new { id = scat.AccountName }) ">@scat.AccountName</a>
                                                        </li>
                                                    }
                                                </ul>
                                            </li>
                                        }

                                    </ul>
                                }
                            </li>
                        }
                    </ul>
                </div>

            </div>

        </div>
        <!-- /Categories -->

        <!-- Compare Products -->
       
        <!-- /Compare Products -->
        <!-- Carousel -->
        <div class="row sidebar-box">

            <div class="col-lg-12 col-md-12 col-sm-12 sidebar-carousel">
                @{
                    var sideAd = (from e in Model.items.Where(u => u.Promotion.Trim() == "YES" && u.AdPosition.StartsWith("Side")) select e).ToList();
                }
                <!-- Slider -->
                <section class="sidebar-slider">
                    <div class="sidebar-flexslider">
                        <ul class="slides">
                            @foreach (var slid in sideAd)
                            {
                                <li>
                                    <a href="@Url.Action("Details", "items", new { id = slid.ID })"><img src="@Url.Content(slid.PromoImage)" alt=" slide1" /></a>
                                </li>
                            }

                        </ul>
                    </div>
                    <div class="slider-nav"></div>
                </section>
                <!-- /Slider -->

            </div>

        </div>
        <!-- /Carousel -->

        <!-- Bestsellers -->
        <div class="row sidebar-box red">

            <div class="col-lg-12 col-md-12 col-sm-12">

                <div class="sidebar-box-heading">
                    <i class="icons icon-award-2"></i>
                    <h4>Bestsellers</h4>
                </div>

                <div class="sidebar-box-content">
                    <table class="bestsellers-table">
                        @{
                            var topsellers = (from e in Model.items.OrderByDescending(u => u.sold) select e).Take(5);
                        }
                        @foreach (var item in topsellers)
                        {
                            <tr>
                                @if (item.ThumbImage == null)
                                {
                                    <td class="product-thumbnail"><a href="@Url.Action("Details", "items", new { id = item.ID })"><img src="@Url.Content("~/Content/Template/img/bag.png")" alt="@item.ItemName"></a></td>
                                }
                                else
                                {
                                    <td class="product-thumbnail"><a href="@Url.Action("Details", "items", new { id = item.ID })"><img src="@Url.Content(item.ThumbImage)" alt="@item.ItemName"></a></td>
                                }
                                <td class="product-info">
                                    <p><a href="@Url.Action("Details", "items", new { id = item.ID })">@item.ItemName</a></p>
                                    <span class="price">$@item.SellingPrice.Value.ToString("0.00", System.Globalization.CultureInfo.InvariantCulture)</span>
                                </td>
                            </tr>
                        }
                    </table>
                </div>

            </div>

        </div>
        <!-- /Bestsellers -->

    </aside>
    <!-- /Sidebar -->

</div> 